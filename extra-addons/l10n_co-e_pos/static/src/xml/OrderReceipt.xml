<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="OrderReceiptCO">
        <div class="pos-receipt">
            <!-- <ReceiptHeader data="props.data.headerData" /> -->
            <t t-set="data_header" t-value="props.data.headerData"/>
            <!-- Todo lo que es cabecera -->
            <img t-attf-src="/web/image?model=res.company&amp;id={{data_header.company.id}}&amp;field=logo" alt="Logo" class="pos-receipt-logo"/>
            <h1 class="tracking-number text-center" style="font-size: 100px" t-if="props.data.trackingNumber and props.data.bigTrackingNumber" t-esc="props.data.trackingNumber" />
            <div class="pos-receipt-contact">
                <!-- contact address -->
                <div t-if="data_header.company.partner_id?.[1]" t-esc="data_header.company.partner_id[1]" />
                <t t-if="data_header.company.contact_address">
                    <div><t t-esc="data_header.company.contact_address" /></div>
                </t>
                <t t-if="data_header.company.phone">
                    <div>Tel:<t t-esc="data_header.company.phone" /></div>
                </t>
                <t t-if="data_header.company.vat">
                    <div><t t-esc="data_header.company.vat_label"/>:<t t-esc="data_header.company.vat" /></div>
                </t>
                <t t-if="data_header.company.email">
                    <div><t t-esc="data_header.company.email" /></div>
                </t>
                <t t-if="data_header.company.website">
                    <div><t t-esc="data_header.company.website" /></div>
                </t>
                <div t-if="props.data.header" style="white-space:pre-line" t-esc="props.data.header" />

                <div class="fw-bolder" t-if="props.data.trackingNumber and !props.data.bigTrackingNumber">
                    <span class="fs-2" t-esc="props.data.trackingNumber" />
                </div>
            </div>
            <br /><br />
            <div t-if="props.data.to_invoice" style="font-size:12px;text-align:left;">
                <div>--------------------------------</div>
                Factura electrónica de venta: <t t-esc="props.data.dian_number"/>
                <div style="word-wrap: break-word;">
                    <t t-esc="'CUFE:' + props.data.dian_cufe"/>
                </div>
                <div style="font-size:12px;text-align:left;">
                    <strong>Autorización DIAN número:</strong>
                    <span t-esc="props.data.dian_resolution_number"/> |
                    <strong>Fecha de Autorización:</strong> <span t-esc="props.data.dian_resolution_date"/>
                    <t t-if="props.data.dian_resolution_date_to"> | <strong>Vigencia de Autorización:</strong> 
                        <span t-esc="props.data.dian_resolution_date_to"/></t>
                    <br/>Rango de Facturación: <span t-esc="props.data.dian_resolution_number_from"/> - 
                    <span t-esc="props.data.dian_resolution_number_to"/> <br/>
                    <t t-if="props.data.dian_invoice_date"><strong>Fecha de facturacion: </strong>
                        <span t-esc="props.data.dian_invoice_date"/>
                        |</t>
                    <t t-if="props.data.dian_invoice_date_due"><strong>Fecha de vencimiento: </strong>
                        <span t-esc="props.data.dian_invoice_date_due"/>
                    </t> |
                    <t t-if="props.data.dian_ref" name="cufe">
                        <strong>Referencia: </strong>
                        <span t-esc="props.data.dian_ref"/>
                    </t>
                    <span style="font-size:12px;"><br/>Representación gráfica de la Factura de Venta
                        Electrónica
                    </span>
                    <br/>
                    <strong>Generado Por: </strong><span t-esc="props.data.dian_company_idname"/> NIT: <span t-esc="props.data.dian_formatedNit"/>
                </div>
                <div>--------------------------------</div>
            </div>
            <div class="sh_customer_detail" style="font-size:12px;text-align:left;">
                <t t-set="client" t-value="props.data.client"/>
                <t t-if="client" class="sh_receipt_footer" >                         
                    <br />
                    <t style="text-align:left;">
                        <div class="sh_customer_name" style="text-align:left;">Cliente : <t t-esc="client.name" /></div>
                    </t>
                    <t style="text-align:left;">
                        <div class="sh_customer_name" style="text-align:left;"> NIT/CC : 
                        <t t-esc="client.vat" /></div>
                    </t>
                    <t style="text-align:left;">
                        <t t-if="client.address">
                            <div class="sh_customer_address" style="text-align:left;"> Direccion: <t t-esc="client.address" /></div>
                        </t>
                    </t>
                    <t style="text-align:left;">
                        <t t-if="client.mobile">
                            <div class="sh_customer_mobile" style="text-align:left;">Telefono : <t t-esc="client.mobile" /></div>
                        </t>
                    </t>
                    <t style="text-align:left;">
                        <t t-if="client.phone">
                            <div class="sh_customer_mobile" style="text-align:left;">Celular : <t t-esc="client.phone" /></div>
                        </t>
                    </t>
                    
                    <t style="text-align:left;">
                        <t t-if="client.email">
                            <div class="sh_customer_mobile" style="text-align:left;">Email : <t t-esc="client.email" /></div>
                        </t>
                    </t>
                </t>
                <div>--------------------------------</div>
                <t class="sh_receipt_footer" >                         
                    <br />
                    <t>
                        <div class="sh_retail_receipt_order_number">
                            <div style="font-size: 12px"> Numero:  <t t-esc="props.data.pos_number" /></div>
                        </div>
                    </t>
                    <t>
                        <div style="text-align:left;">
                            <span style="font-size: 12px;">Fecha :</span>
                            <div style="font-size: 12px;" t-esc="props.data.date" />
                        </div>
                    </t>
                    <t>
                        <div style="text-align:left;">
                            <span style="font-size: 12px;">POS : </span>
                            <span style="font-size: 12px;">
                                <t t-esc="props.data.config_name + ' ('+ props.data.cashier +')'" />
                            </span>
                        </div>
                    </t>
                </t>
            </div>

            <table class='sltech-receipt-orderlines'>
                <tr style="font-size: 14px;  linetext-align: center">
                    <td style="width: 20%; font-size: 14px;  text-align: center">
                         <span>DESC(%)</span>
                    </td>
                    <td style="width: 20%; font-size: 14px;  text-align: center">
                         <span>QTY</span>
                    </td>
                    <td style="width: 30%; font-size: 14px;  text-align: center">
                        <span>P/U</span>
                    </td>
                    <td style="width: 30%; font-size: 14px;  text-align: center">
                        <span>TOTAL</span>
                    </td>
                </tr>
                <t t-foreach="props.data.orderlines" t-as="line" t-key="line_index">
                    <tr>
                        <td colspan="4" style="text-align: left;padding-top: 12px;' : 'text-align: left;'">
                            <span style="text-align: left;padding-top: 12px;'">
                                <t t-if="line.default_code">
                                    [<t t-esc="line.default_code"/>]
                                </t>
                                <t t-esc="line.productName"/>
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <t>
                            <div style="font-size: 12px; text-align:left;">
                                Desc: <t t-esc="line.discount" />%
                            </div>
                        </t>
                        <td style="  font-size: 12px; text-align:center;">
                            <span style="text-align:center;">
                                <t  t-esc="line.quantity" />
                            </span>
                        </td>                     
                        <td style="  font-size: 12px; text-align:right;">
                            <span style="text-align:center;">
                                <t t-esc="line.totalco" /></span>
                        </td>
                        <td style="  font-size: 12px; text-align:center;">
                            <span style="text-align:center;">
                                <t t-esc="line.price" />
                            </span>
                        </td>

                    </tr>
                </t>
            </table>

            <!-- <OrderWidget lines="props.data.orderlines" t-slot-scope="scope">
                <t t-set="line" t-value="scope.line"/>
                <Orderline line="omit(scope.line, 'customerNote')" class="{ 'pe-none': true }">
                    <li t-if="line.customerNote" class="customer-note w-100 p-2 my-1 rounded text-break">
                        <i class="fa fa-sticky-note me-1" role="img" aria-label="Customer Note" title="Customer Note"/>
                        <t t-esc="line.customerNote" />
                    </li>
                    <ul t-if="line.pack_lot_lines">
                        <li t-foreach="line.pack_lot_lines" t-as="lot" t-key="lot.cid">
                            <t t-if="lot.order_line.product.tracking == 'lot'">
                                Lot Number <t t-esc="lot.lot_name"/>
                            </t>
                            <t t-else="">
                                SN <t t-esc="lot.lot_name"/>
                            </t>
                        </li>
                    </ul>
                </Orderline>
            </OrderWidget> -->

            <!-- Total -->
            <div class="pos-receipt-right-align">--------</div>
            <br/>
            <div class="pos-receipt-amount">
                TOTAL
                <span t-esc="props.formatCurrency(props.data.amount_total)" class="pos-receipt-right-align"/>
            </div>
            <t t-if="props.data.rounding_applied">
                <div class="pos-receipt-amount">
                  Rounding
                <span t-esc='props.formatCurrency(props.data.rounding_applied)' class="pos-receipt-right-align"/>
                </div>
                <div class="pos-receipt-amount">
                  To Pay
                 <span t-esc='props.formatCurrency(props.data.amount_total + props.data.rounding_applied)' class="pos-receipt-right-align"/>
              </div>
            </t>
            <br/><br/>

            <!-- Payment Lines -->

            <div class="paymentlines" t-foreach="props.data.paymentlines" t-as="line" t-key="line_index">
                <t t-esc="line.name" />
                <span t-esc="props.formatCurrency(line.amount, false)" class="pos-receipt-right-align"/>
            </div>

            <div class="pos-receipt-amount receipt-change mt-2">
                CHANGE
                <span t-esc="props.formatCurrency(props.data.change)" class="pos-receipt-right-align"/>
            </div>

            <!-- Extra Payment Info -->

            <t t-if="props.data.total_discount">
                <div>
                    Discounts
                    <span t-esc="props.formatCurrency(props.data.total_discount)" class="pos-receipt-right-align"/>
                </div>
            </t>
            <div t-if="props.data.tax_details.length > 0" class="pos-receipt-taxes">
                <span />
                <span>VAT%</span>
                <span>VAT</span>
                <span>ExVAT</span>
                <span>Total</span>
                <t t-foreach="props.data.tax_details" t-as="tax" t-key="tax.tax.id">
                    <span t-esc="tax.tax.letter || ''"/>
                    <span><t t-esc="tax.tax.amount"/> %</span>
                    <span t-esc="props.formatCurrency(tax.amount, false)" />
                    <span t-esc="props.formatCurrency(tax.base, false)" />
                    <span t-esc="props.formatCurrency(tax.amount + tax.base, false)" />
                </t>
                <t t-if="props.data.tax_details.length > 1">
                    <span />
                    <span />
                    <span t-esc="props.formatCurrency(props.data.amount_tax, false)" />
                    <span t-esc="props.formatCurrency(props.data.total_without_tax, false)" />
                    <span t-esc="props.formatCurrency(props.data.amount_total, false)" />
                </t>
            </div>

            <div class="before-footer" />

            <div t-if="props.data.pos_qr_code">
                <br /><br />
                <div class="pos-receipt-order-data mb-2">
                    Scan me to request an invoice for your purchase.
                </div>
                <img id="posqrcode" t-att-src="props.data.pos_qr_code" class="pos-receipt-logo"/>
            </div>

            <div t-if="props.data.ticket_code">
                <br /><br />
                <div class="pos-receipt-order-data">
                    You can go to <t t-out="props.data.base_url"/>/pos/ticket and use the code below to request an invoice online
                </div>
                <div class="pos-receipt-order-data">
                    Unique Code: <t t-out="props.data.ticket_code"/>
                </div>
            </div>

            <!-- Footer -->
           <div t-if="props.data.footer"  class="pos-receipt-center-align" style="white-space:pre-line">
               <br/>
               <t t-esc="props.data.footer" />
                <br/>
                <br/>
            </div>

            <div class="after-footer">
                <t t-foreach="props.data.paymentlines" t-as="line" t-key="line_index">
                    <t t-if="line.ticket">
                        <br />
                        <div class="pos-payment-terminal-receipt">
                            <pre t-esc="line.ticket" />
                        </div>
                    </t>
                </t>
            </div>
            <div><img id="qrcode" t-att-src="props.data.qr_code" class="pos-receipt-logo" style='margin-top: -15px;margin-bottom: -35px;'/></div>
            <div class="sh_receipt_footer">
                <div t-esc="props.data.date"/>
            </div>

            <br/>
            <t t-if="props.shippingDate">
                <div class="pos-receipt-order-data">
                    Expected delivery:
                    <div><t t-esc="props.shippingDate" /></div>
                </div>
            </t>

            <br/>
            <div class="pos-receipt-order-data">
                <p>Odoo Point of Sale</p>
                <div t-esc="props.data.name" />
                <div t-esc="props.data.date" />
            </div>
        </div>
    </t>
</templates>
